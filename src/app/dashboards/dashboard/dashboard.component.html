<div class="container-fluid">
  <!-- start page title -->
  <div class="row">
    <div class="col-12">
      <div
        class="page-title-box d-flex align-items-center justify-content-between"
      >
        <h4 class="mb-0 font-size-18 ">{{ 'welcomeDash' | translate }}</h4>
        <div class="page-title-right">
          <ol class="breadcrumb m-0">
            <li class="breadcrumb-item active">
              {{ 'welcomeDash' | translate }}
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <!-- end page title -->
  <ng-template
    *ngIf="user.Instructor !== null"
    [ngTemplateOutlet]="Instructor"
  ></ng-template>
  <ng-template
    *ngIf="
      (user.AccountAdmin === null && user.Student === null && user.Instructor === null )   || user.AccountAdmin !== null
    "
    [ngTemplateOutlet]="Admin"
  ></ng-template>
</div>
<!-- container-fluid -->

<!-- Tab Content -->
<ng-template #notificationTab>
  <div class="table-responsive mt-2">
    <table class="table table-borderless">
      <thead>
      <tr>
        <th>{{ 'dashboard.NotificationName' | translate }}</th>
        <th>{{ 'dashboard.Description' | translate }}</th>
        <th>{{ 'dashboard.Date' | translate }}</th>
        <th>{{ 'dashboard.Status' | translate }}</th>
      </tr>
      </thead>
      <div class="row">
        <hr style="border-top: 1px solid red"/>
      </div>
      <tbody>
      <tr *ngFor="let notif of notifications; let index = index">
        <td>{{ notif.title }}</td>
        <td>{{ notif.description }}</td>
        <td>{{ notif.createdAt }}</td>
        <td>{{ 'Status' }}</td>
        <br/>
      </tr>
      </tbody>
    </table>
  </div>

  <div class="row justify-content-md-between align-items-md-center mt-4">
    <div class="col-sm-12 col-md-5">
      <div
        class="dataTables_info mb-2"
        id="tickets-table_info1"
        role="status"
        aria-live="polite"
      >
        {{ 'show' | translate }}
        {{ tableConfig.startIndex + 1 }} {{ 'to' | translate }}
        {{ tableConfig.endIndex }} of {{ tableConfig.totalRecords }}
        {{ 'entries' | translate }}
      </div>
    </div>
    <!-- Pagination -->
    <div class="col-sm-12 col-md-5">
      <div class="text-md-right float-md-right pagination-rounded">
        <ngb-pagination
          [collectionSize]="tableConfig.totalRecords"
          [(page)]="tableConfig.page"
          [pageSize]="tableConfig.pageSize"
        >
        </ngb-pagination>
      </div>
    </div>
    <!-- End Pagination -->
  </div>
</ng-template>

<!-- Tab Content -->
<ng-template #onboardingTab>
  <div class="row p-5">
    <div *ngIf="onboardingData.idScan" class="col-6">
      <div class="mt-4 row">
        <h3>{{ 'dashboard.IdScan' | translate }}</h3>
      </div>

      <div class="mt-4 row">
        <p class="mb-2 text-truncate">{{ 'dashboard.Date' | translate }} :</p>
        <p class="mx-2">{{ user.scanProcessDate | date: 'short' }}</p>
      </div>

      <div class="mt-4 row">
        <p class="mb-2 text-truncate text-danger">
          {{ 'dashboard.ExpirationDate' | translate }} :
        </p>
        <p class="mx-2 text-danger">
          {{ user.scanProcessEndDate | date: 'short' }}
        </p>
      </div>

      <div class="mt-4 row">
        <p class="mb-2">
          {{ 'dashboard.onboardingScan' | translate }}
        </p>
      </div>

      <div class="row d-flex">
        <button class="btn btn-primary my-2 align-self-center" type="submit">
          {{ 'dashboard.Re-take' | translate }}
        </button>
      </div>
    </div>

    <div *ngIf="onboardingData.faceScan" class="col-6">
      <div class="mt-4 row">
        <h3>{{ 'dashboard.FaceScan' | translate }}</h3>
      </div>

      <div class="mt-4 row">
        <p class="mb-2 text-truncate">{{ 'dashboard.Date' | translate }} :</p>
        <p class="mx-2">{{ user.scanProcessDate | date: 'short' }}</p>
      </div>

      <div class="mt-4 row">
        <p class="mb-2 text-truncate text-danger">Expiration Date :</p>
        <p class="mx-2 text-danger">
          {{ user.scanProcessEndDate | date: 'short' }}
        </p>
      </div>

      <div class="mt-4 row">
        <p class="mb-2">
          Your onboarding scans have been uploaded correctly and are valid until
          the date shown above.
        </p>
      </div>

      <div class="row d-flex">
        <button class="btn btn-primary my-2 align-self-center" type="submit">
          Re-take Onboarding Test
        </button>
      </div>
    </div>

    <div *ngIf="onboardingData.knuckleScan" class="col-6">
      <div class="mt-4 row">
        <h3>Knuckle scan</h3>
      </div>

      <div class="mt-4 row">
        <p class="mb-2 text-truncate">Date :</p>
        <p class="mx-2">{{ user.scanProcessDate | date: 'short' }}</p>
      </div>

      <div class="mt-4 row">
        <p class="mb-2 text-truncate text-danger">Expiration Date :</p>
        <p class="mx-2 text-danger">
          {{ user.scanProcessEndDate | date: 'short' }}
        </p>
      </div>

      <div class="mt-4 row">
        <p class="mb-2">
          Your onboarding scans have been uploaded correctly and are valid until
          the date shown above.
        </p>
      </div>

      <div class="row d-flex">
        <button class="btn btn-primary my-2 align-self-center" type="submit">
          Re-take Onboarding Test
        </button>
      </div>
    </div>

    <div class="col-6 bg-light">
      <!-- Indicator carousel -->
      <ngb-carousel
        (slide)="currentSlide($event)"
        [showNavigationIndicators]="true"
      >
        <ng-template id="1" ngbSlide>
          <img
            src="{{ host + onboardingData.image }}"
            style="width: 100%; height: 100%"
            *ngIf="onboardingData.image != ''"
            alt="face slide"
            class="d-block img-fluid"
          />
          <div></div>
        </ng-template>
        <ng-template id="2" ngbSlide>
          <img
            src="{{ host + onboardingData.image }}"
            style="width: 100%; height: 100%"
            *ngIf="onboardingData.image != ''"
            alt="id slide"
            class="d-block img-fluid"
          />
          <div></div>
        </ng-template>
        <ng-template id="3" ngbSlide>
          <img
            src="{{ host + onboardingData.image }}"
            style="width: 100%; height: 100%"
            *ngIf="onboardingData.image != ''"
            alt="Knuckle slide"
            class="d-block img-fluid"
          />
          <div></div>
        </ng-template>
      </ngb-carousel>
      <!-- End indicator carousel -->
    </div>
  </div>
</ng-template>

<!-- ////////////////////////////////////////////  Instructor template -->

<ng-template #Instructor>
  <div class="row">
    <div class="col-xl-4">
      <div class="card overflow-hidden">
        <div class="bg-soft-primary">
          <div class="row">
            <div class="col-7">
              <div class="text-primary p-3">
                <h5 class="text-primary">
                  {{ 'dashboard.WelcomeBack' | translate }}
                </h5>
                <p>{{ 'dashboard.ProctoringDashboard' | translate }}</p>
              </div>
            </div>
            <div class="col-5 align-self-end">
              <img
                alt=""
                class="img-fluid"
                src="assets/images/profile-img.png"
              />
            </div>
          </div>
        </div>
        <div class="card-body pt-0">
          <div class="row">
            <div class="col-sm-4">
              <div class="avatar-md profile-user-wid mb-4">
                <img
                  alt=""
                  class="img-thumbnail rounded-circle"
                  src="assets/images/users/avatar-1.jpg"
                />
              </div>
              <h5 class="font-size-15 text-truncate">Henry Price</h5>
              <p class="text-muted mb-0 text-truncate">UI/UX Designer</p>
            </div>

            <div class="col-sm-8">
              <div class="pt-4">
                <div class="row">
                  <div class="col-6">
                    <h5 class="font-size-15">125</h5>
                    <p class="text-muted mb-0">
                      {{ 'dashboard.Projects' | translate }}
                    </p>
                  </div>
                  <div class="col-6">
                    <h5 class="font-size-15">$1245</h5>
                    <p class="text-muted mb-0">
                      {{ 'dashboard.Revenue' | translate }}
                    </p>
                  </div>
                </div>
                <div class="mt-4">
                  <a class="btn btn-primary btn-sm" href=""
                  >{{ 'profile.view' | translate }}
                    <i class="mdi mdi-arrow-right ml-1"></i
                    ></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h4 class="card-title mb-4">
            {{ 'dashboard.MonthlyEarning' | translate }}
          </h4>
          <div class="row">
            <div class="col-sm-6">
              <p class="text-muted">{{ 'dashboard.ThisMonth' | translate }}</p>
              <h3>$34,252</h3>
              <p class="text-muted">
                <span class="text-success mr-2">
                  12% <i class="mdi mdi-arrow-up"></i>
                </span>
                {{ 'from' | translate }}
                {{ 'dashboard.previousPeriod' | translate }}
              </p>

              <div class="mt-4">
                <a class="btn btn-primary btn-sm" href=""
                >{{ 'dashboard.ViewMore' | translate
                  }}<i class="mdi mdi-arrow-right ml-1"></i
                  ></a>
              </div>
            </div>
            <div class="col-sm-6">
              <apx-chart
                [chart]="monthlyEarningChart.chart"
                [colors]="monthlyEarningChart.colors"
                [labels]="monthlyEarningChart.labels"
                [legend]="monthlyEarningChart.legend"
                [plotOptions]="monthlyEarningChart.plotOptions"
                [series]="monthlyEarningChart.series"
                [stroke]="monthlyEarningChart.stroke"
                class="apex-charts"
                dir="ltr"
              >
              </apx-chart>
            </div>
          </div>
          <p class="text-muted mb-0">{{ 'dashboard.craft' | translate }}</p>
        </div>
      </div>
    </div>
    <div class="col-xl-8">
      <div class="row"></div>
      <!-- end row -->

      <div class="card">
        <div class="card-body">
          <h4 class="card-title mb-4 float-sm-left">
            {{ 'dashboard.EmailSent' | translate }}
          </h4>
          <div class="float-sm-right">
            <ul class="nav nav-pills">
              <li class="nav-item">
                <a class="nav-link" href="javascript: void(0);"
                >{{ 'dashboard.Week' | translate }}
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="javascript: void(0);"
                >{{ 'dashboard.Month' | translate }}
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="javascript: void(0);"
                >{{ 'dashboard.Year' | translate }}
                </a>
              </li>
            </ul>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>
    </div>
  </div>
  <!-- end row -->

  <div class="col-lg-12">
    <div class="card">
      <div class="card-body">
        <div class="table-responsive mt-2">
          <table class="table table-borderless table-striped">
            <thead>
            <tr>
              <th>#</th>
              <th>{{ 'viewTest.name' | translate }}</th>
              <th>{{ 'viewTest.duration' | translate }}</th>
              <th>{{ 'viewTest.startDate' | translate }}</th>
              <th>{{ 'viewTest.endDate' | translate }}</th>
              <th>{{ 'viewTest.publish' | translate }}</th>
              <th>{{ 'action' | translate }}</th>
            </tr>
            </thead>
            <div class="row">
              <hr style="border-top: 1px solid red"/>
            </div>
            <tbody class="beforeBody">
            <tr *ngFor="let test of tests; let index = index">
              <td>
                {{ index + 1 }}
              </td>
              <td>
                <div>
                  {{ test.name }}
                  <span
                    *ngIf="test.onboardingTest"
                    class="badge badge-pill badge-soft-success font-size-12 mx-2"
                  >Onboarding</span
                  >
                </div>
              </td>
              <td>{{ test.duration }}</td>
              <td>{{ test.opens | date: 'short' }}</td>
              <td>{{ test.closes | date: 'short' }}</td>
              <td>
                <button
                  (click)="updatePublish(test, index)"
                  [ngClass]="{ 'btn-light': test.published === false }"
                  class="btn btn-primary btn-sm"
                  type="button"
                >
                  {{ test.published ? 'Un Publish' : 'Publish' }}
                </button>
              </td>

              <td>
                <div
                  class="btn-group dropup mt-2 mr-1"
                  ngbDropdown
                  placement="top"
                  style="position: absolute; z-index: 3"
                >
                  <a
                    aria-expanded="false"
                    class="dropdown-toggle card-drop"
                    data-toggle="dropdown"
                    href="javascript: void(0);"
                    ngbDropdownToggle
                  >
                    <i class="mdi mdi-dots-horizontal font-size-18"></i>
                  </a>
                  <div class="dropdown-menu Thedropdown" ngbDropdownMenu>
                    <a
                      [routerLink]="['/tests/edit-test/' + test.id]"
                      class="dropdown-item"
                    >
                      <i class="fas fa-pencil-alt text-primary mr-1"></i>
                      {{ 'viewTest.Edit Exam' | translate }}
                    </a>
                    <a
                      [routerLink]="['/tests/test-configuration/' + test.id]"
                      class="dropdown-item"
                    >
                      <i class="bx bxs-cog text-primary mr-1"></i>
                      {{ 'viewTest.Edit Configurations' | translate }}
                    </a>
                    <!-- <a href="javascript: void(0);" (click)="updatePublish(test,index)"    class="dropdown-item">
                    <i class="mdi mdi-publish text-primary mr-1"></i>
                    {{'viewTest.publish'|translate}}
                  </a> -->
                    <a
                      [routerLink]="['/tests/exam-students/' + test.id]"
                      class="dropdown-item"
                    >
                      <i class="bx bxs-add-to-queue text-primary mr-1"></i>
                      {{ 'viewTest.Add Student' | translate }}
                    </a>
                    <a
                      [routerLink]="['/tests/student-reports/' + test.id]"
                      class="dropdown-item"
                    >
                      <i class="bx bx-log-in-circle text-primary mr-1"></i>
                      {{ 'viewTest.testHistory' | translate }}
                    </a>
                    <a
                      [routerLink]="['/tests/students/view/' + test.id]"
                      class="dropdown-item"
                    >
                      <i class="mdi mdi-eye text-primary mr-1"></i>
                      {{ 'viewTest.View Resisted students' | translate }}
                    </a>
                    <a
                      [routerLink]="['/tests/bulk-student/' + test.id]"
                      class="dropdown-item"
                    >
                      <i class="mdi mdi-import text-primary mr-1"></i>
                      {{ 'Bulk Register Student' | translate }}
                    </a>
                    <a
                      [routerLink]="['/tests/bulk-questions/' + test.id]"
                      class="dropdown-item"
                    >
                      <i class="mdi mdi-import text-primary mr-1"></i>
                      {{ 'Bulk Import Questions' | translate }}
                    </a>

                    <a
                      (click)="openModal(content)"
                      class="dropdown-item"
                      href="javascript: void(0);"
                    >
                      <i class="bx bx-question-mark text-primary mr-1"></i>
                      {{ 'viewTest.Add Questions' | translate }}
                    </a>
                    <a
                      [routerLink]="['tests/questions/view/' + test.id]"
                      class="dropdown-item"
                    >
                      <i class="mdi mdi-file-question text-primary mr-1"></i>
                      {{ 'viewTest.View Questions' | translate }}
                    </a>
                    <a
                      [routerLink]="['/tests/student-report/' + test.id]"
                      class="dropdown-item"
                    >
                      <i class="mdi mdi-import text-primary mr-1"></i>
                      {{ 'viewTest.studentReport' | translate }}
                    </a>
                    <a
                      [routerLink]="['/tests/moderate/' + test.id]"
                      class="dropdown-item"
                    >
                      <i class="bx bxs-cog text-primary mr-1"></i>
                      {{ 'moderate' | translate }}
                    </a>
                  </div>
                </div>
                <div class="col-sm-12 col-md-6 text-sm-right">
                  <ng-template #content let-modal role="document">
                    <div class="modal-header">
                      <h3 class="modal-title mt-0">Select Question Type:</h3>
                      <button
                        (click)="modal.dismiss('Cross click')"
                        aria-hidden="true"
                        class="close"
                        type="button"
                      >
                        ��
                      </button>
                    </div>
                    <div class="modal-body">
                      <select
                        (change)="
                            onEditClick($event.target.value, test.id, modal)
                          "
                        class="form-control"
                      >
                        <option disabled selected value="">
                          Please select Question Type
                        </option>
                        <option *ngFor="let type of types" [value]="type.id">
                          {{ type.englishTitle }}
                        </option>
                      </select>
                    </div>
                    <div class="modal-footer">
                      <button
                        (click)="modal.close('Close click')"
                        class="btn btn-light"
                        type="button"
                      >
                        Close
                      </button>
                    </div>
                  </ng-template>
                </div>
              </td>

              <br/>
            </tr>
            </tbody>
          </table>
        </div>

        <div class="row justify-content-md-between align-items-md-center mt-4">
          <div class="col-sm-12 col-md-5">
            <div
              class="dataTables_info mb-2"
              id="tickets-table_info"
              role="status"
              aria-live="polite"
            >
              {{ 'show' | translate }}
              {{ tableConfig.startIndex + 1 }} {{ 'to' | translate }}
              {{ tableConfig.endIndex }} {{ 'of' | translate }}
              {{ tableConfig.totalRecords }}
              {{ 'entries' | translate }}
            </div>
          </div>
          <!-- Pagination -->
          <div class="col-sm-12 col-md-5">
            <div class="text-md-right float-md-right pagination-rounded">
              <ngb-pagination
                [(page)]="tableConfig.page"
                (pageChange)="filtertests()"
                [pageSize]="tableConfig.pageSize"
                [collectionSize]="tableConfig.totalRecords"
              >
              </ngb-pagination>
            </div>
          </div>
          <!-- End Pagination -->
        </div>
      </div>
    </div>
  </div>
  <!-- End Justified Tabs -->
</ng-template>

<!-- ////////////////////////////////////////////  admin template -->

<ng-template #Admin>
  <div class="row">
    <div class="col-xl-4">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title mb-4">
            {{ 'dashboard.MonthlyEarning' | translate }}
          </h4>
          <div class="row">
            <div class="col-sm-6">
              <p class="text-muted">{{ 'dashboard.ThisMonth' | translate }}</p>
              <h3>$34,252</h3>
              <p class="text-muted">
                <span class="text-success mr-2">
                  12% <i class="mdi mdi-arrow-up"></i>
                </span>
                {{ 'dashboard.previousPeriod' | translate }}
              </p>

              <div class="mt-4">
                <a class="btn btn-primary btn-sm" href=""
                >{{ 'dashboard.ViewMore' | translate }}
                  <i class="mdi mdi-arrow-right ml-1"></i
                  ></a>
              </div>
            </div>
            <div class="col-sm-6"></div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h4 class="card-title mb-4">
            {{ 'dashboard.topCities' | translate }}
          </h4>
          <div class="text-center">
            <h3>{{ trials?.TOTAL }}</h3>
            <p>{{ 'dashboard.sanFrancisco' | translate }}</p>
          </div>

          <div class="table-responsive mt-4">
            <table class="table table-centered table-nowrap">
              <tbody>
              <tr>
                <td style="width: 30%">
                  <p class="mb-0">
                    {{ 'dashboard.done' | translate }}
                  </p>
                </td>
                <td style="width: 25%">
                  <h5 class="mb-0">{{ trials?.READY_FOR_REVIEW }}</h5>
                </td>
                <td>
                  <div class="progress bg-transparent progress-sm">
                    <div
                      aria-valuemax="100"
                      aria-valuemin="0"
                      aria-valuenow="trials?.READY_FOR_REVIEW / trials?.TOTAL * 100"
                      class="progress-bar bg-primary rounded"
                      role="progressbar"
                      style="width: 94%"
                    ></div>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <p class="mb-0">{{ 'dashboard.LosAngeles' | translate }}</p>
                </td>
                <td>
                  <h5 class="mb-0">{{ trials?.PENDING }}</h5>
                </td>
                <td>
                  <div class="progress bg-transparent progress-sm">
                    <div
                      aria-valuemax="100"
                      aria-valuemin="0"
                      aria-valuenow="82"
                      class="progress-bar bg-success rounded"
                      role="progressbar"
                      style="width: 82%"
                    ></div>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <p class="mb-0">{{ 'dashboard.SanDiego' | translate }}</p>
                </td>
                <td>
                  <h5 class="mb-0">{{ trials?.OnServer }}</h5>
                </td>
                <td>
                  <div class="progress bg-transparent progress-sm">
                    <div
                      aria-valuemax="100"
                      aria-valuemin="0"
                      aria-valuenow="70"
                      class="progress-bar bg-warning rounded"
                      role="progressbar"
                      style="width: 70%"
                    ></div>
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-8">
      <div class="row">
        <!--        accounts -->
        <div class="col-md-4">
          <app-stat
            [icon]="'mdi-account-circle'"
            [title]="'Account'"
            [value]="dashboardData?.accountCount"
          ></app-stat>
        </div>

        <!--        instructors -->
        <div class="col-md-4">
          <app-stat
            [icon]=""
            [title]="'Instructor'"
            [value]="dashboardData?.instructorCount"
          ></app-stat>
        </div>

        <!--        students -->
        <div class="col-md-4">
          <app-stat
            [icon]=""
            [title]="'Student'"
            [value]="dashboardData?.studentCount"
          ></app-stat>
        </div>
      </div>
      <!-- end row -->

      <div class="card">
        <div class="card-body">
          <h4 class="card-title mb-4 float-sm-left">
            {{ 'dashboard.test' | translate }}
          </h4>
          <div class="float-sm-right">
            <ul class="nav nav-pills">
              <li class="nav-item">
                <div
                  (click)="changePeriod($event, periodType.Month)"
                  class="nav-link"
                  [ngClass]="{
                    active: selectedPeriodtype === periodType.Month
                  }"
                  style="cursor: pointer"
                >
                  {{ 'dashboard.Month' | translate }}
                </div>
              </li>
              <li
                class="nav-item"
                (click)="changePeriod($event, periodType.Year)"
              >
                <div
                  class="nav-link"
                  style="cursor: pointer"
                  [ngClass]="{ active: selectedPeriodtype === periodType.Year }"
                >
                  {{ 'dashboard.Year' | translate }}
                </div>
              </li>
            </ul>
          </div>
          <div class="clearfix"></div>
          <apx-chart
            *ngIf="testsBarChart"
            [chart]="testsBarChart?.chart"
            [colors]="testsBarChart?.colors"
            [dataLabels]="testsBarChart?.dataLabels"
            [fill]="testsBarChart?.fill"
            [legend]="testsBarChart?.legend"
            [plotOptions]="testsBarChart?.plotOptions"
            [series]="testsBarChart?.series"
            [xaxis]="testsBarChart?.xaxis"
            class="apex-charts"
            dir="ltr"
          >
          </apx-chart>
        </div>
      </div>
    </div>
  </div>
  <!-- end row -->

  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title mb-4">
            {{ 'dashboard.LatestTransaction' | translate }}
          </h4>
          <app-transaction [transactions]="transactions"></app-transaction>
          <!-- end table -->
        </div>
      </div>
    </div>
  </div>
</ng-template>
